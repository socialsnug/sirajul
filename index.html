import React, { useState, useEffect } from 'react';
import { initializeApp } from 'firebase/app';
import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from 'firebase/auth';
import { getFirestore, doc, collection, onSnapshot, setDoc, addDoc, updateDoc, deleteDoc } from 'firebase/firestore';

// Global variables provided by the Canvas environment
const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

// Initialize Firebase App
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

// Default structure for new items/initial data
const initialHeroData = {
    profilePicUrl: 'https://placehold.co/180x180/7B68EE/FFFFFF?text=Sirajul',
    title: 'Best Freelancer in Bangladesh',
    tagline: 'I am Sirajul, a passionate and experienced freelance professional specializing in Web Development, UI/UX Design, and Digital Marketing.',
    experience: '+12',
    projectsCompleted: '+250',
    happyClients: '+680',
    awardsReceived: '+18'
};

const initialService = {
    title: 'New Service',
    description: 'Description for the new service.',
    order: 0
};

const initialProject = {
    title: 'New Project',
    description: 'A brief description of this new project.',
    imageUrl: 'https://placehold.co/600x425/CCCCCC/000000?text=New+Project',
    link: '#',
    category: 'Development' // Default category
};

const initialEducation = {
    degree: 'New Degree',
    institution: 'New University',
    year: '202X',
    description: 'Description of studies.'
};

const initialExperience = {
    title: 'New Position',
    company: 'New Company',
    years: 'YYYY - Present',
    description: 'Responsibilities and achievements.'
};

const initialSkill = {
    name: 'New Skill',
    percentage: 50,
    order: 0
};

const initialTestimonial = {
    quote: 'This is a new testimonial!',
    clientName: 'New Client',
    clientTitle: 'New Title',
    clientImage: 'https://placehold.co/50x50/B0E0E6/000000?text=Client'
};

const initialBlogPost = {
    title: 'New Blog Post',
    description: 'Short description of the new blog post.',
    imageUrl: 'https://placehold.co/600x425/60A5FA/ffffff?text=New+Blog',
    link: '#'
};

const initialContact = {
    phone: '+1 234-567-8901',
    email: 'info@sirajul.design',
    address: '123 Main Street, Dhaka, Bangladesh'
};


const App = () => {
    const [loggedIn, setLoggedIn] = useState(false);
    const [username, setUsername] = useState('');
    const [password, setPassword] = useState('');
    const [loading, setLoading] = useState(true);
    const [authReady, setAuthReady] = useState(false);
    const [adminUserId, setAdminUserId] = useState(null);

    // Portfolio data states
    const [heroData, setHeroData] = useState(initialHeroData);
    const [services, setServices] = useState([]);
    const [portfolioProjects, setPortfolioProjects] = useState([]);
    const [education, setEducation] = useState([]);
    const [experience, setExperience] = useState([]);
    const [skills, setSkills] = useState([]);
    const [testimonials, setTestimonials] = useState([]);
    const [blogPosts, setBlogPosts] = useState([]);
    const [contactData, setContactData] = useState(initialContact);
    const [pageTitle, setPageTitle] = useState('Sirajul - Professional Portfolio');


    // Firebase Authentication
    useEffect(() => {
        const unsubscribe = onAuthStateChanged(auth, async (user) => {
            if (user) {
                setAdminUserId(user.uid);
                console.log("Firebase Auth: User is signed in:", user.uid);
            } else {
                console.log("Firebase Auth: No user signed in. Attempting anonymous sign-in.");
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                        console.log("Signed in with custom token.");
                    } else {
                        await signInAnonymously(auth);
                        console.log("Signed in anonymously.");
                    }
                } catch (error) {
                    console.error("Firebase Auth failed:", error);
                }
            }
            setAuthReady(true); // Auth state is ready
            setLoading(false);
        });
        return () => unsubscribe();
    }, []);

    // Fetch data from Firestore once authenticated
    useEffect(() => {
        if (!authReady || !adminUserId) return;

        // Fetch Hero Data & Page Title & Contact
        // Changed path to include 'appSettings' collection to ensure even segments (collection/document/collection/document)
        const configRef = doc(db, `artifacts/${appId}/public/data/appSettings`, 'portfolioConfig');
        const unsubscribeConfig = onSnapshot(configRef, (docSnap) => {
            if (docSnap.exists()) {
                const data = docSnap.data();
                setHeroData(data.hero || initialHeroData);
                setContactData(data.contact || initialContact);
                setPageTitle(data.pageTitle || 'Sirajul - Professional Portfolio');
            } else {
                // If config document doesn't exist, create it with initial data
                setDoc(configRef, {
                    hero: initialHeroData,
                    contact: initialContact,
                    pageTitle: 'Sirajul - Professional Portfolio',
                    servicesIntro: 'Passionate about my work, leading me to specialize in:',
                    blogIntro: 'Explore the insights and trends shaping our industry.'
                }, { merge: true }).then(() => {
                    console.log("Initial portfolioConfig document created.");
                }).catch(error => {
                    console.error("Error creating initial portfolioConfig:", error);
                });
            }
        }, (error) => {
            console.error("Error fetching portfolio config:", error);
        });

        // Fetch Services
        const servicesRef = collection(db, `artifacts/${appId}/public/data/services`);
        const unsubscribeServices = onSnapshot(servicesRef, (snapshot) => {
            const items = [];
            snapshot.forEach(doc => items.push({ id: doc.id, ...doc.data() }));
            items.sort((a, b) => (a.order || 0) - (b.order || 0)); // Sort by order
            setServices(items);
        }, (error) => { console.error("Error fetching services:", error); });

        // Fetch Portfolio Projects
        const projectsRef = collection(db, `artifacts/${appId}/public/data/portfolioProjects`);
        const unsubscribeProjects = onSnapshot(projectsRef, (snapshot) => {
            const items = [];
            snapshot.forEach(doc => items.push({ id: doc.id, ...doc.data() }));
            setPortfolioProjects(items);
        }, (error) => { console.error("Error fetching projects:", error); });

        // Fetch Education
        const educationRef = collection(db, `artifacts/${appId}/public/data/education`);
        const unsubscribeEducation = onSnapshot(educationRef, (snapshot) => {
            const items = [];
            snapshot.forEach(doc => items.push({ id: doc.id, ...doc.data() }));
            items.sort((a, b) => parseInt(b.year) - parseInt(a.year)); // Sort by year descending
            setEducation(items);
        }, (error) => { console.error("Error fetching education:", error); });

        // Fetch Experience
        const experienceRef = collection(db, `artifacts/${appId}/public/data/experience`);
        const unsubscribeExperience = onSnapshot(experienceRef, (snapshot) => {
            const items = [];
            snapshot.forEach(doc => items.push({ id: doc.id, ...doc.data() }));
            setExperience(items);
        }, (error) => { console.error("Error fetching experience:", error); });

        // Fetch Skills
        const skillsRef = collection(db, `artifacts/${appId}/public/data/skills`);
        const unsubscribeSkills = onSnapshot(skillsRef, (snapshot) => {
            const items = [];
            snapshot.forEach(doc => items.push({ id: doc.id, ...doc.data() }));
            items.sort((a, b) => (a.order || 0) - (b.order || 0)); // Sort by order
            setSkills(items);
        }, (error) => { console.error("Error fetching skills:", error); });

        // Fetch Testimonials
        const testimonialsRef = collection(db, `artifacts/${appId}/public/data/testimonials`);
        const unsubscribeTestimonials = onSnapshot(testimonialsRef, (snapshot) => {
            const items = [];
            snapshot.forEach(doc => items.push({ id: doc.id, ...doc.data() }));
            setTestimonials(items);
        }, (error) => { console.error("Error fetching testimonials:", error); });

        // Fetch Blog Posts
        const blogPostsRef = collection(db, `artifacts/${appId}/public/data/blogPosts`);
        const unsubscribeBlogPosts = onSnapshot(blogPostsRef, (snapshot) => {
            const items = [];
            snapshot.forEach(doc => items.push({ id: doc.id, ...doc.data() }));
            setBlogPosts(items);
        }, (error) => { console.error("Error fetching blog posts:", error); });


        return () => {
            unsubscribeConfig();
            unsubscribeServices();
            unsubscribeProjects();
            unsubscribeEducation();
            unsubscribeExperience();
            unsubscribeSkills();
            unsubscribeTestimonials();
            unsubscribeBlogPosts();
        };
    }, [authReady, adminUserId]); // Re-run when auth state is ready or user changes

    const handleLogin = (e) => {
        e.preventDefault();
        // Client-side hardcoded login for demo purposes only.
        // In a real app, Firebase Auth would handle login.
        if (username === 'admin' && password === 'admin') {
            setLoggedIn(true);
        } else {
            // Using a custom modal/dialog instead of alert()
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Invalid username or password.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        }
    };

    const handleLogout = () => {
        setLoggedIn(false);
        setUsername('');
        setPassword('');
        // No Firebase sign out needed as we're relying on browser session for demo
    };

    // CRUD Operations for Hero Data (portfolioConfig document)
    const updateHeroData = async () => {
        setLoading(true);
        try {
            // Changed path to include 'appSettings' collection
            const configRef = doc(db, `artifacts/${appId}/public/data/appSettings`, 'portfolioConfig');
            await setDoc(configRef, { hero: heroData, pageTitle: pageTitle }, { merge: true });
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Hero data updated successfully!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error updating hero data:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update hero data.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    // CRUD Operations for Services
    const addService = async () => {
        setLoading(true);
        try {
            await addDoc(collection(db, `artifacts/${appId}/public/data/services`), initialService);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Service added!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error adding service:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to add service.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const updateService = async (id, data) => {
        setLoading(true);
        try {
            await updateDoc(doc(db, `artifacts/${appId}/public/data/services`, id), data);
            // No alert for update, as it's often triggered by rapid input changes
        } catch (error) {
            console.error("Error updating service:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update service.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const deleteService = async (id) => {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        confirmDialog.innerHTML = `
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                <p class="text-gray-300 text-lg mb-4">Are you sure you want to delete this service?</p>
                <div class="flex justify-center space-x-4">
                    <button id="confirm-delete" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Delete
                    </button>
                    <button id="cancel-delete" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Cancel
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);

        return new Promise(resolve => {
            document.getElementById('confirm-delete').addEventListener('click', async () => {
                document.body.removeChild(confirmDialog);
                setLoading(true);
                try {
                    await deleteDoc(doc(db, `artifacts/${appId}/public/data/services`, id));
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-gray-300 text-lg mb-4">Service deleted!</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(true);
                } catch (error) {
                    console.error("Error deleting service:", error);
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-red-400 text-lg mb-4">Failed to delete service.</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(false);
                } finally {
                    setLoading(false);
                }
            });
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.body.removeChild(confirmDialog);
                resolve(false);
            });
        });
    };

    // CRUD Operations for Portfolio Projects
    const addProject = async () => {
        setLoading(true);
        try {
            await addDoc(collection(db, `artifacts/${appId}/public/data/portfolioProjects`), initialProject);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Project added!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error adding project:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to add project.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const updateProject = async (id, data) => {
        setLoading(true);
        try {
            await updateDoc(doc(db, `artifacts/${appId}/public/data/portfolioProjects`, id), data);
        } catch (error) {
            console.error("Error updating project:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update project.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const deleteProject = async (id) => {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        confirmDialog.innerHTML = `
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                <p class="text-gray-300 text-lg mb-4">Are you sure you want to delete this project?</p>
                <div class="flex justify-center space-x-4">
                    <button id="confirm-delete" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Delete
                    </button>
                    <button id="cancel-delete" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Cancel
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);

        return new Promise(resolve => {
            document.getElementById('confirm-delete').addEventListener('click', async () => {
                document.body.removeChild(confirmDialog);
                setLoading(true);
                try {
                    await deleteDoc(doc(db, `artifacts/${appId}/public/data/portfolioProjects`, id));
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-gray-300 text-lg mb-4">Project deleted!</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(true);
                } catch (error) {
                    console.error("Error deleting project:", error);
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-red-400 text-lg mb-4">Failed to delete project.</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(false);
                } finally {
                    setLoading(false);
                }
            });
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.body.removeChild(confirmDialog);
                resolve(false);
            });
        });
    };

    // CRUD Operations for Education
    const addEducation = async () => {
        setLoading(true);
        try {
            await addDoc(collection(db, `artifacts/${appId}/public/data/education`), initialEducation);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Education item added!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error adding education item:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to add education item.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const updateEducation = async (id, data) => {
        setLoading(true);
        try {
            await updateDoc(doc(db, `artifacts/${appId}/public/data/education`, id), data);
        } catch (error) {
            console.error("Error updating education item:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update education item.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const deleteEducation = async (id) => {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        confirmDialog.innerHTML = `
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                <p class="text-gray-300 text-lg mb-4">Are you sure you want to delete this education item?</p>
                <div class="flex justify-center space-x-4">
                    <button id="confirm-delete" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Delete
                    </button>
                    <button id="cancel-delete" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Cancel
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);

        return new Promise(resolve => {
            document.getElementById('confirm-delete').addEventListener('click', async () => {
                document.body.removeChild(confirmDialog);
                setLoading(true);
                try {
                    await deleteDoc(doc(db, `artifacts/${appId}/public/data/education`, id));
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-gray-300 text-lg mb-4">Education item deleted!</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(true);
                } catch (error) {
                    console.error("Error deleting education item:", error);
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-red-400 text-lg mb-4">Failed to delete education item.</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(false);
                } finally {
                    setLoading(false);
                }
            });
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.body.removeChild(confirmDialog);
                resolve(false);
            });
        });
    };

    // CRUD Operations for Experience
    const addExperience = async () => {
        setLoading(true);
        try {
            await addDoc(collection(db, `artifacts/${appId}/public/data/experience`), initialExperience);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Experience item added!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error adding experience item:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to add experience item.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const updateExperience = async (id, data) => {
        setLoading(true);
        try {
            await updateDoc(doc(db, `artifacts/${appId}/public/data/experience`, id), data);
        } catch (error) {
            console.error("Error updating experience item:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update experience item.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const deleteExperience = async (id) => {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        confirmDialog.innerHTML = `
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                <p class="text-gray-300 text-lg mb-4">Are you sure you want to delete this experience item?</p>
                <div class="flex justify-center space-x-4">
                    <button id="confirm-delete" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Delete
                    </button>
                    <button id="cancel-delete" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Cancel
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);

        return new Promise(resolve => {
            document.getElementById('confirm-delete').addEventListener('click', async () => {
                document.body.removeChild(confirmDialog);
                setLoading(true);
                try {
                    await deleteDoc(doc(db, `artifacts/${appId}/public/data/experience`, id));
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-gray-300 text-lg mb-4">Experience item deleted!</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(true);
                } catch (error) {
                    console.error("Error deleting experience item:", error);
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-red-400 text-lg mb-4">Failed to delete experience item.</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(false);
                } finally {
                    setLoading(false);
                }
            });
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.body.removeChild(confirmDialog);
                resolve(false);
            });
        });
    };

    // CRUD Operations for Skills
    const addSkill = async () => {
        setLoading(true);
        try {
            await addDoc(collection(db, `artifacts/${appId}/public/data/skills`), initialSkill);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Skill added!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error adding skill:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to add skill.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const updateSkill = async (id, data) => {
        setLoading(true);
        try {
            await updateDoc(doc(db, `artifacts/${appId}/public/data/skills`, id), data);
        } catch (error) {
            console.error("Error updating skill:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update skill.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const deleteSkill = async (id) => {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        confirmDialog.innerHTML = `
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                <p class="text-gray-300 text-lg mb-4">Are you sure you want to delete this skill?</p>
                <div class="flex justify-center space-x-4">
                    <button id="confirm-delete" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Delete
                    </button>
                    <button id="cancel-delete" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Cancel
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);

        return new Promise(resolve => {
            document.getElementById('confirm-delete').addEventListener('click', async () => {
                document.body.removeChild(confirmDialog);
                setLoading(true);
                try {
                    await deleteDoc(doc(db, `artifacts/${appId}/public/data/skills`, id));
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-gray-300 text-lg mb-4">Skill deleted!</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(true);
                } catch (error) {
                    console.error("Error deleting skill:", error);
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-red-400 text-lg mb-4">Failed to delete skill.</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(false);
                } finally {
                    setLoading(false);
                }
            });
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.body.removeChild(confirmDialog);
                resolve(false);
            });
        });
    };

    // CRUD Operations for Testimonials
    const addTestimonial = async () => {
        setLoading(true);
        try {
            await addDoc(collection(db, `artifacts/${appId}/public/data/testimonials`), initialTestimonial);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Testimonial added!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error adding testimonial:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to add testimonial.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const updateTestimonial = async (id, data) => {
        setLoading(true);
        try {
            await updateDoc(doc(db, `artifacts/${appId}/public/data/testimonials`, id), data);
        } catch (error) {
            console.error("Error updating testimonial:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update testimonial.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const deleteTestimonial = async (id) => {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        confirmDialog.innerHTML = `
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                <p class="text-gray-300 text-lg mb-4">Are you sure you want to delete this testimonial?</p>
                <div class="flex justify-center space-x-4">
                    <button id="confirm-delete" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Delete
                    </button>
                    <button id="cancel-delete" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Cancel
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);

        return new Promise(resolve => {
            document.getElementById('confirm-delete').addEventListener('click', async () => {
                document.body.removeChild(confirmDialog);
                setLoading(true);
                try {
                    await deleteDoc(doc(db, `artifacts/${appId}/public/data/testimonials`, id));
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-gray-300 text-lg mb-4">Testimonial deleted!</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(true);
                } catch (error) {
                    console.error("Error deleting testimonial:", error);
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-red-400 text-lg mb-4">Failed to delete testimonial.</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(false);
                } finally {
                    setLoading(false);
                }
            });
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.body.removeChild(confirmDialog);
                resolve(false);
            });
        });
    };

    // CRUD Operations for Blog Posts
    const addBlogPost = async () => {
        setLoading(true);
        try {
            await addDoc(collection(db, `artifacts/${appId}/public/data/blogPosts`), initialBlogPost);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Blog post added!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error adding blog post:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to add blog post.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const updateBlogPost = async (id, data) => {
        setLoading(true);
        try {
            await updateDoc(doc(db, `artifacts/${appId}/public/data/blogPosts`, id), data);
        } catch (error) {
            console.error("Error updating blog post:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update blog post.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    const deleteBlogPost = async (id) => {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        confirmDialog.innerHTML = `
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                <p class="text-gray-300 text-lg mb-4">Are you sure you want to delete this blog post?</p>
                <div class="flex justify-center space-x-4">
                    <button id="confirm-delete" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Delete
                    </button>
                    <button id="cancel-delete" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        Cancel
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);

        return new Promise(resolve => {
            document.getElementById('confirm-delete').addEventListener('click', async () => {
                document.body.removeChild(confirmDialog);
                setLoading(true);
                try {
                    await deleteDoc(doc(db, `artifacts/${appId}/public/data/blogPosts`, id));
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-gray-300 text-lg mb-4">Blog post deleted!</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(true);
                } catch (error) {
                    console.error("Error deleting blog post:", error);
                    const messageBox = document.createElement('div');
                    messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    messageBox.innerHTML = `
                        <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                            <p class="text-red-400 text-lg mb-4">Failed to delete blog post.</p>
                            <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                OK
                            </button>
                        </div>
                    `;
                    document.body.appendChild(messageBox);
                    document.getElementById('close-message-box').addEventListener('click', () => {
                        document.body.removeChild(messageBox);
                    });
                    resolve(false);
                } finally {
                    setLoading(false);
                }
            });
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.body.removeChild(confirmDialog);
                resolve(false);
            });
        });
    };

    // CRUD Operations for Contact Data
    const updateContactData = async () => {
        setLoading(true);
        try {
            // Changed path to include 'appSettings' collection
            const configRef = doc(db, `artifacts/${appId}/public/data/appSettings`, 'portfolioConfig');
            await setDoc(configRef, { contact: contactData }, { merge: true });
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Contact data updated successfully!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error updating contact data:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update contact data.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };

    // CRUD Operations for Page Title
    const updatePageTitle = async () => {
        setLoading(true);
        try {
            const configRef = doc(db, `artifacts/${appId}/public/data/appSettings`, 'portfolioConfig');
            await setDoc(configRef, { pageTitle: pageTitle }, { merge: true });
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-gray-300 text-lg mb-4">Page title updated successfully!</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } catch (error) {
            console.error("Error updating page title:", error);
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageBox.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm w-full text-center">
                    <p class="text-red-400 text-lg mb-4">Failed to update page title.</p>
                    <button id="close-message-box" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                        OK
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
            document.getElementById('close-message-box').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        } finally {
            setLoading(false);
        }
    };


    if (loading) {
        return (
            <div className="min-h-screen flex items-center justify-center bg-gray-900 text-blue-400">
                <p>Loading Firebase...</p>
            </div>
        );
    }

    if (!loggedIn) {
        return (
            <div className="min-h-screen flex items-center justify-center bg-gray-900">
                <form onSubmit={handleLogin} className="bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700 w-full max-w-sm">
                    <h2 className="text-3xl font-bold text-center text-blue-400 mb-6">Admin Login</h2>
                    <div className="mb-4">
                        <label className="block text-gray-300 text-sm font-bold mb-2" htmlFor="username">
                            Username
                        </label>
                        <input
                            className="shadow appearance-none border border-gray-600 rounded w-full py-3 px-4 text-gray-200 bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            id="username"
                            type="text"
                            placeholder="admin"
                            value={username}
                            onChange={(e) => setUsername(e.target.value)}
                            required
                        />
                    </div>
                    <div className="mb-6">
                        <label className="block text-gray-300 text-sm font-bold mb-2" htmlFor="password">
                            Password
                        </label>
                        <input
                            className="shadow appearance-none border border-gray-600 rounded w-full py-3 px-4 text-gray-200 bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            id="password"
                            type="password"
                            placeholder="admin"
                            value={password}
                            onChange={(e) => setPassword(e.target.value)}
                            required
                        />
                    </div>
                    <div className="flex items-center justify-between">
                        <button
                            className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition duration-300 transform hover:scale-105 focus:outline-none focus:shadow-outline w-full"
                            type="submit"
                        >
                            Sign In
                        </button>
                    </div>
                </form>
            </div>
        );
    }

    return (
        <div className="min-h-screen bg-gray-900 text-gray-300 p-6 md:p-10">
            <header className="flex flex-wrap justify-between items-center py-4 px-6 bg-gray-800 shadow-lg rounded-lg mb-8">
                <h1 className="text-3xl font-bold text-blue-400 mb-2 md:mb-0">Portfolio Admin Panel</h1>
                <p className="text-gray-400 mb-2 md:mb-0">User ID: <span className="font-semibold text-blue-300">{adminUserId || 'N/A'}</span></p>
                <button
                    onClick={handleLogout}
                    className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 transform hover:scale-105"
                >
                    Logout
                </button>
            </header>

            {/* General Settings */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">General Settings</h2>
                <div className="mb-4">
                    <label className="block text-gray-300 text-sm font-bold mb-2" htmlFor="pageTitle">
                        Page Title
                    </label>
                    <input
                        className="bg-gray-700 shadow appearance-none border border-gray-600 rounded w-full py-3 px-4 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        id="pageTitle"
                        type="text"
                        value={pageTitle}
                        onChange={(e) => setPageTitle(e.target.value)}
                    />
                </div>
                <button onClick={updatePageTitle} className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                    Save Page Title
                </button>
            </section>

            {/* Hero Section Editor */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Hero Section</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Profile Picture URL</label>
                        <input
                            type="text"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={heroData.profilePicUrl}
                            onChange={(e) => setHeroData({ ...heroData, profilePicUrl: e.target.value })}
                        />
                    </div>
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Main Title</label>
                        <input
                            type="text"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={heroData.title}
                            onChange={(e) => setHeroData({ ...heroData, title: e.target.value })}
                        />
                    </div>
                    <div className="md:col-span-2">
                        <label className="block text-gray-300 text-sm font-bold mb-2">Tagline</label>
                        <textarea
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={heroData.tagline}
                            onChange={(e) => setHeroData({ ...heroData, tagline: e.target.value })}
                            rows="3"
                        ></textarea>
                    </div>
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Years of Experience</label>
                        <input
                            type="text"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={heroData.experience}
                            onChange={(e) => setHeroData({ ...heroData, experience: e.target.value })}
                        />
                    </div>
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Projects Completed</label>
                        <input
                            type="text"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={heroData.projectsCompleted}
                            onChange={(e) => setHeroData({ ...heroData, projectsCompleted: e.target.value })}
                        />
                    </div>
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Happy Clients</label>
                        <input
                            type="text"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={heroData.happyClients}
                            onChange={(e) => setHeroData({ ...heroData, happyClients: e.target.value })}
                        />
                    </div>
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Awards Received</label>
                        <input
                            type="text"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={heroData.awardsReceived}
                            onChange={(e) => setHeroData({ ...heroData, awardsReceived: e.target.value })}
                        />
                    </div>
                </div>
                <button onClick={updateHeroData} className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                    Save Hero Data
                </button>
            </section>

            {/* Services Editor */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Services</h2>
                <button onClick={addService} className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full mb-6 transition duration-300">
                    Add New Service
                </button>
                <div className="space-y-6">
                    {services.map((service) => (
                        <div key={service.id} className="bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <div className="flex-grow w-full md:w-auto">
                                <label className="block text-gray-300 text-sm">Title</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={service.title}
                                    onChange={(e) => updateService(service.id, { title: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Description</label>
                                <textarea
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={service.description}
                                    onChange={(e) => updateService(service.id, { description: e.target.value })}
                                    rows="2"
                                ></textarea>
                                <label className="block text-gray-300 text-sm mt-2">Order</label>
                                <input
                                    type="number"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={service.order || 0}
                                    onChange={(e) => updateService(service.id, { order: parseInt(e.target.value) || 0 })}
                                />
                            </div>
                            <button onClick={() => deleteService(service.id)} className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                Delete
                            </button>
                        </div>
                    ))}
                </div>
            </section>

            {/* Portfolio Editor */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Portfolio Projects</h2>
                <button onClick={addProject} className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full mb-6 transition duration-300">
                    Add New Project
                </button>
                <div className="space-y-6">
                    {portfolioProjects.map((project) => (
                        <div key={project.id} className="bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <div className="flex-grow w-full md:w-auto">
                                <label className="block text-gray-300 text-sm">Title</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={project.title}
                                    onChange={(e) => updateProject(project.id, { title: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Description</label>
                                <textarea
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={project.description}
                                    onChange={(e) => updateProject(project.id, { description: e.target.value })}
                                    rows="2"
                                ></textarea>
                                <label className="block text-gray-300 text-sm mt-2">Image URL</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={project.imageUrl}
                                    onChange={(e) => updateProject(project.id, { imageUrl: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Project Link</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={project.link}
                                    onChange={(e) => updateProject(project.id, { link: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Category</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={project.category}
                                    onChange={(e) => updateProject(project.id, { category: e.target.value })}
                                />
                            </div>
                            <button onClick={() => deleteProject(project.id)} className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                Delete
                            </button>
                        </div>
                    ))}
                </div>
            </section>

            {/* Resume Editor - Education */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Education</h2>
                <button onClick={addEducation} className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full mb-6 transition duration-300">
                    Add New Education
                </button>
                <div className="space-y-6">
                    {education.map((item) => (
                        <div key={item.id} className="bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <div className="flex-grow w-full md:w-auto">
                                <label className="block text-gray-300 text-sm">Degree</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.degree}
                                    onChange={(e) => updateEducation(item.id, { degree: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Institution</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.institution}
                                    onChange={(e) => updateEducation(item.id, { institution: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Year</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.year}
                                    onChange={(e) => updateEducation(item.id, { year: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Description</label>
                                <textarea
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.description}
                                    onChange={(e) => updateEducation(item.id, { description: e.target.value })}
                                    rows="2"
                                ></textarea>
                            </div>
                            <button onClick={() => deleteEducation(item.id)} className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                Delete
                            </button>
                        </div>
                    ))}
                </div>
            </section>

            {/* Resume Editor - Experience */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Experience</h2>
                <button onClick={addExperience} className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full mb-6 transition duration-300">
                    Add New Experience
                </button>
                <div className="space-y-6">
                    {experience.map((item) => (
                        <div key={item.id} className="bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <div className="flex-grow w-full md:w-auto">
                                <label className="block text-gray-300 text-sm">Title</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.title}
                                    onChange={(e) => updateExperience(item.id, { title: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Company</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.company}
                                    onChange={(e) => updateExperience(item.id, { company: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Years</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.years}
                                    onChange={(e) => updateExperience(item.id, { years: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Description</label>
                                <textarea
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={item.description}
                                    onChange={(e) => updateExperience(item.id, { description: e.target.value })}
                                    rows="2"
                                ></textarea>
                            </div>
                            <button onClick={() => deleteExperience(item.id)} className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                Delete
                            </button>
                        </div>
                    ))}
                </div>
            </section>

            {/* Skills Editor */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Skills</h2>
                <button onClick={addSkill} className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full mb-6 transition duration-300">
                    Add New Skill
                </button>
                <div className="space-y-6">
                    {skills.map((skill) => (
                        <div key={skill.id} className="bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <div className="flex-grow w-full md:w-auto">
                                <label className="block text-gray-300 text-sm">Skill Name</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={skill.name}
                                    onChange={(e) => updateSkill(skill.id, { name: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Percentage</label>
                                <input
                                    type="number"
                                    min="0"
                                    max="100"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={skill.percentage}
                                    onChange={(e) => updateSkill(skill.id, { percentage: parseInt(e.target.value) || 0 })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Order</label>
                                <input
                                    type="number"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={skill.order || 0}
                                    onChange={(e) => updateSkill(skill.id, { order: parseInt(e.target.value) || 0 })}
                                />
                            </div>
                            <button onClick={() => deleteSkill(skill.id)} className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                Delete
                            </button>
                        </div>
                    ))}
                </div>
            </section>

            {/* Testimonials Editor */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Testimonials</h2>
                <button onClick={addTestimonial} className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full mb-6 transition duration-300">
                    Add New Testimonial
                </button>
                <div className="space-y-6">
                    {testimonials.map((testimonial) => (
                        <div key={testimonial.id} className="bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <div className="flex-grow w-full md:w-auto">
                                <label className="block text-gray-300 text-sm">Quote</label>
                                <textarea
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={testimonial.quote}
                                    onChange={(e) => updateTestimonial(testimonial.id, { quote: e.target.value })}
                                    rows="3"
                                ></textarea>
                                <label className="block text-gray-300 text-sm mt-2">Client Name</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={testimonial.clientName}
                                    onChange={(e) => updateTestimonial(testimonial.id, { clientName: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Client Title</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={testimonial.clientTitle}
                                    onChange={(e) => updateTestimonial(testimonial.id, { clientTitle: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Client Image URL</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={testimonial.clientImage}
                                    onChange={(e) => updateTestimonial(testimonial.id, { clientImage: e.target.value })}
                                />
                            </div>
                            <button onClick={() => deleteTestimonial(testimonial.id)} className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                Delete
                            </button>
                        </div>
                    ))}
                </div>
            </section>

            {/* Blog Posts Editor */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Blog Posts</h2>
                <button onClick={addBlogPost} className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full mb-6 transition duration-300">
                    Add New Blog Post
                </button>
                <div className="space-y-6">
                    {blogPosts.map((post) => (
                        <div key={post.id} className="bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <div className="flex-grow w-full md:w-auto">
                                <label className="block text-gray-300 text-sm">Title</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={post.title}
                                    onChange={(e) => updateBlogPost(post.id, { title: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Description</label>
                                <textarea
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={post.description}
                                    onChange={(e) => updateBlogPost(post.id, { description: e.target.value })}
                                    rows="2"
                                ></textarea>
                                <label className="block text-gray-300 text-sm mt-2">Image URL</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={post.imageUrl}
                                    onChange={(e) => updateBlogPost(post.id, { imageUrl: e.target.value })}
                                />
                                <label className="block text-gray-300 text-sm mt-2">Post Link</label>
                                <input
                                    type="text"
                                    className="bg-gray-600 border border-gray-500 rounded w-full py-2 px-3 text-gray-200"
                                    value={post.link}
                                    onChange={(e) => updateBlogPost(post.id, { link: e.target.value })}
                                />
                            </div>
                            <button onClick={() => deleteBlogPost(post.id)} className="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                                Delete
                            </button>
                        </div>
                    ))}
                </div>
            </section>

            {/* Contact Info Editor */}
            <section className="mb-12 bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 className="text-3xl font-bold text-blue-300 mb-6 border-b border-gray-700 pb-3">Contact Information</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Phone Number</label>
                        <input
                            type="text"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={contactData.phone}
                            onChange={(e) => setContactData({ ...contactData, phone: e.target.value })}
                        />
                    </div>
                    <div>
                        <label className="block text-gray-300 text-sm font-bold mb-2">Email Address</label>
                        <input
                            type="email"
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={contactData.email}
                            onChange={(e) => setContactData({ ...contactData, email: e.target.value })}
                        />
                    </div>
                    <div className="md:col-span-2">
                        <label className="block text-gray-300 text-sm font-bold mb-2">Address</label>
                        <textarea
                            className="bg-gray-700 shadow border border-gray-600 rounded w-full py-3 px-4 text-gray-200"
                            value={contactData.address}
                            onChange={(e) => setContactData({ ...contactData, address: e.target.value })}
                            rows="2"
                        ></textarea>
                    </div>
                </div>
                <button onClick={updateContactData} className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                    Save Contact Info
                </button>
            </section>

            <footer className="text-center text-gray-500 py-6">
                <p>&copy; 2025 Portfolio Admin Panel. All rights reserved.</p>
            </footer>
        </div>
    );
};

export default App;
